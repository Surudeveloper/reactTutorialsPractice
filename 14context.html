<script src="./src/reactDev.js"></script>
<script src="./src/reactDOM.js"></script>
<script src="./src/babel.js"></script>

<div id="root"></div>
<style>

</style>
<script type="text/babel">
    // create store (context) outside the component

    /*
    # useContext is a hook which is use to consume the data from the context/store.
    # Context is used to provide the data from parent to all direct or indirect children. 
    or make the data available to parent and all direct or indirect children.

    => first create a context or store
    => make context available to all components
    => provide data to the context
    => consume data from the context 
    
    Context always pass the data to down-flow, ie from parent to child only
    else we have to use redux when data is used irrespective of its hierarchy
    */

    const ctx = React.createContext()
    const { Provider } = ctx

    const D = () => {
        const ctxData = React.useContext(ctx)
        return <div>
            <p>D Component </p>
            <span> Result:{ctxData}</span>
        </div>
    }
    const C = () => {
        return <div>
            <p>C Component</p>
            <D />
        </div>
    }
    const B = () => {
        return <div>
            <p>B Component</p>
            <C />
        </div>
    }
    const A = () => {
        return <div>
            <p>A Component</p>
            <B />
        </div>
    }
    const App = () => {
        const [name, setName] = React.useState('')
        const [data, setData] = React.useState('No Data')

        const ChangeHAndler = (eve) => {
            setName(eve.target.value)
        }
        const ClickHAndler = () => {
            setData(name)
            setName('') //to empty the input after click
        }

        return <div>
            <p>App</p>
            <p>Player: <input type="text" onChange={ChangeHAndler} value={name}></input></p>
            <button onClick={ClickHAndler}>Submit</button>
            <Provider value={data}>
                <A />
            </Provider >

        </div>
    }

    const container = document.getElementById("root");
    const root = ReactDOM.createRoot(container)
    root.render(<App />)

</script>